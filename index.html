<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shah Photography - Booking & Ledger App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Three.js library -->
    <script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        .date-disabled {
            background-color: #f3f4f6;
            color: #9ca3af;
            cursor: not-allowed;
        }
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(31, 41, 55, 0.6);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(31, 41, 55, 0.8);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }
        .tab-active {
            border-bottom: 3px solid #6d28d9;
            color: #6d28d9;
            font-weight: 600;
        }
        .transaction-item {
            border-left: 4px solid transparent;
            transition: all 0.2s ease;
        }
        .transaction-credit {
            border-left-color: #10b981;
        }
        .transaction-debit {
            border-left-color: #ef4444;
        }
    </style>
</head>
<body class="text-gray-800 min-h-screen">
    <!-- Three.js canvas container -->
    <div id="canvas-container"></div>
    
    <div class="container mx-auto px-4 py-8 relative z-10">
        <header class="mb-8 text-center">
            <div class="flex justify-center items-center mb-2">
                <i class="bi bi-camera text-3xl mr-2"></i>
                <h1 class="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-indigo-800">Shah Photography</h1>
            </div>
            <p class="text-gray-700 max-w-lg mx-auto">Capturing your special moments with elegance and precision</p>
        </header>
        
        <!-- Navigation Tabs -->
        <div class="flex justify-center mb-6">
            <div class="flex space-x-2 md:space-x-8 overflow-x-auto pb-2 w-full max-w-lg">
                <button id="bookingTab" class="tab-active px-4 py-2 whitespace-nowrap" onclick="switchTab('booking')">
                    <i class="bi bi-camera mr-1"></i> Booking
                </button>
                <button id="ledgerTab" class="px-4 py-2 whitespace-nowrap" onclick="switchTab('ledger')">
                    <i class="bi bi-journal-text mr-1"></i> Digital Ledger
                </button>
                <button id="remindersTab" class="px-4 py-2 whitespace-nowrap" onclick="switchTab('reminders')">
                    <i class="bi bi-bell mr-1"></i> Reminders
                </button>
                <button id="reportsTab" class="px-4 py-2 whitespace-nowrap" onclick="switchTab('reports')">
                    <i class="bi bi-bar-chart mr-1"></i> Reports
                </button>
            </div>
        </div>

        <!-- Booking Form Tab -->
        <div id="bookingSection" class="max-w-md mx-auto glass-card rounded-lg p-6 mb-10">
            <h2 class="text-2xl font-semibold mb-6 text-center">Book Your Session</h2>
            <form id="bookingForm" class="space-y-4">
                <div>
                    <label class="block text-gray-700 mb-2">Name</label>
                    <input type="text" name="name" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70">
                </div>
                
                <div>
                    <label class="block text-gray-700 mb-2">Phone Number</label>
                    <input type="tel" name="phone" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70">
                </div>

                <div>
                    <label class="block text-gray-700 mb-2">Event Type</label>
                    <select name="eventType" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70" required>
                        <option value="">Select Event Type</option>
                        <option value="wedding">Wedding Photography</option>
                        <option value="birthday">Birthday Party</option>
                        <option value="corporate">Corporate Event</option>
                        <option value="portrait">Portrait Session</option>
                        <option value="family">Family Photoshoot</option>
                        <option value="product">Product Photography</option>
                    </select>
                </div>

                <div>
                    <label class="block text-gray-700 mb-2">Date</label>
                    <input type="date" name="date" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70">
                </div>

                <div>
                    <label class="block text-gray-700 mb-2">Time Slot</label>
                    <select name="timeSlot" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70" required>
                        <option value="">Select Time Slot</option>
                        <option value="morning">Morning (9 AM - 12 PM)</option>
                        <option value="afternoon">Afternoon (1 PM - 4 PM)</option>
                        <option value="evening">Evening (5 PM - 8 PM)</option>
                    </select>
                </div>

                <div>
                    <label class="block text-gray-700 mb-2">Location</label>
                    <input type="text" name="location" placeholder="Enter address or location" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70">
                </div>

                <div>
                    <label class="block text-gray-700 mb-2">Package</label>
                    <select name="package" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70">
                        <option value="">Select Package (Optional)</option>
                        <option value="basic">Basic (2 hours, 50 photos) - ₹5,000</option>
                        <option value="standard">Standard (4 hours, 100 photos) - ₹10,000</option>
                        <option value="premium">Premium (Full day, 200+ photos) - ₹20,000</option>
                        <option value="custom">Custom Package</option>
                    </select>
                </div>

                <div>
                    <label class="block text-gray-700 mb-2">Additional Requirements</label>
                    <textarea name="requirements" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70" rows="3" placeholder="Any specific requirements or details about your event..."></textarea>
                </div>

                <button type="submit" class="w-full bg-gradient-to-r from-purple-600 to-indigo-700 text-white py-3 rounded-lg hover:from-purple-700 hover:to-indigo-800 transition duration-300 font-medium flex items-center justify-center">
                    <i class="bi bi-calendar-check mr-2"></i> Book Now
                </button>
            </form>
        </div>

        <!-- Digital Ledger Tab -->
        <div id="ledgerSection" class="max-w-4xl mx-auto glass-card rounded-lg p-6 mb-10 hidden">
            <h2 class="text-2xl font-semibold mb-6 text-center">Digital Ledger</h2>
            
            <div class="mb-6 flex flex-col md:flex-row md:space-x-4 space-y-4 md:space-y-0">
                <div class="glass-card rounded-lg p-4 flex-1 border-l-4 border-indigo-500">
                    <h3 class="text-lg font-medium mb-1">Total Transactions</h3>
                    <p class="text-3xl font-bold" id="totalTransactions">0</p>
                </div>
                <div class="glass-card rounded-lg p-4 flex-1 border-l-4 border-green-500">
                    <h3 class="text-lg font-medium mb-1">Total Credits</h3>
                    <p class="text-3xl font-bold text-green-600" id="totalCredits">₹0</p>
                </div>
                <div class="glass-card rounded-lg p-4 flex-1 border-l-4 border-red-500">
                    <h3 class="text-lg font-medium mb-1">Total Debits</h3>
                    <p class="text-3xl font-bold text-red-600" id="totalDebits">₹0</p>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-4">Add New Entry</h3>
                <form id="ledgerForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Customer Name</label>
                            <input type="text" name="customerName" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Phone Number</label>
                            <input type="tel" name="customerPhone" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Transaction Type</label>
                            <select name="transactionType" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70" required>
                                <option value="credit">Credit (Money In)</option>
                                <option value="debit">Debit (Money Out)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Amount (₹)</label>
                            <input type="number" name="amount" required min="1" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Date</label>
                            <input type="date" name="transactionDate" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70">
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">Description</label>
                        <textarea name="description" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70" rows="2" placeholder="Payment for wedding shoot, advance payment, etc."></textarea>
                    </div>
                    <div class="flex space-x-2">
                        <button type="submit" class="flex-1 bg-gradient-to-r from-purple-600 to-indigo-700 text-white py-2 rounded-lg hover:from-purple-700 hover:to-indigo-800 transition duration-300 font-medium flex items-center justify-center">
                            <i class="bi bi-plus-circle mr-2"></i> Add Entry
                        </button>
                        <button type="button" id="sendSmsBtn" class="bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition duration-300 font-medium flex items-center justify-center">
                            <i class="bi bi-send mr-2"></i> Send SMS
                        </button>
                    </div>
                </form>
            </div>

            <div>
                <h3 class="text-xl font-semibold mb-4">Recent Transactions</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-left table-auto">
                        <thead class="bg-gray-100 rounded-t-lg">
                            <tr>
                                <th class="px-4 py-2">Date</th>
                                <th class="px-4 py-2">Name</th>
                                <th class="px-4 py-2">Phone</th>
                                <th class="px-4 py-2">Description</th>
                                <th class="px-4 py-2">Amount</th>
                                <th class="px-4 py-2">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTableBody">
                            <!-- Transactions will be added here dynamically -->
                            <tr class="text-center">
                                <td colspan="6" class="px-4 py-8 text-gray-500">No transactions yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Payment Reminders Tab -->
        <div id="remindersSection" class="max-w-4xl mx-auto glass-card rounded-lg p-6 mb-10 hidden">
            <h2 class="text-2xl font-semibold mb-6 text-center">Payment Reminders</h2>
            
            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-4">Schedule Reminder</h3>
                <form id="reminderForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Customer Name</label>
                            <select name="reminderCustomer" id="reminderCustomerSelect" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70" required>
                                <option value="">Select Customer</option>
                                <!-- Customer options will be added dynamically -->
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Reminder Date</label>
                            <input type="date" name="reminderDate" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70">
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">Reminder Message</label>
                        <textarea name="reminderMessage" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-indigo-500 bg-white bg-opacity-70" rows="3" placeholder="Dear customer, this is a reminder about your pending payment..."></textarea>
                    </div>
                    <button type="submit" class="w-full bg-gradient-to-r from-purple-600 to-indigo-700 text-white py-2 rounded-lg hover:from-purple-700 hover:to-indigo-800 transition duration-300 font-medium flex items-center justify-center">
                        <i class="bi bi-bell mr-2"></i> Schedule Reminder
                    </button>
                </form>
            </div>

            <div>
                <h3 class="text-xl font-semibold mb-4">Upcoming Reminders</h3>
                <div id="upcomingReminders" class="space-y-3">
                    <!-- Reminders will be added here dynamically -->
                    <div class="text-center py-8 text-gray-500">No reminders scheduled</div>
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reportsSection" class="max-w-4xl mx-auto glass-card rounded-lg p-6 mb-10 hidden">
            <h2 class="text-2xl font-semibold mb-6 text-center">Business Reports</h2>
            
            <div class="mb-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="glass-card rounded-lg p-4 border-l-4 border-indigo-500">
                    <h3 class="text-lg font-medium mb-1">Total Bookings</h3>
                    <p class="text-3xl font-bold" id="totalBookings">0</p>
                </div>
                <div class="glass-card rounded-lg p-4 border-l-4 border-green-500">
                    <h3 class="text-lg font-medium mb-1">Total Revenue</h3>
                    <p class="text-3xl font-bold text-green-600" id="totalRevenue">₹0</p>
                </div>
                <div class="glass-card rounded-lg p-4 border-l-4 border-blue-500">
                    <h3 class="text-lg font-medium mb-1">Pending Payments</h3>
                    <p class="text-3xl font-bold text-blue-600" id="pendingPayments">₹0</p>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-4">Monthly Revenue</h3>
                <div class="bg-white p-4 rounded-lg h-64 flex items-center justify-center">
                    <div class="w-full h-48" id="revenueChart">
                        <div class="text-center py-16 text-gray-500">Chart will be displayed here</div>
                    </div>
                </div>
            </div>
            
            <div>
                <h3 class="text-xl font-semibold mb-4">Recent Bookings</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-left table-auto">
                        <thead class="bg-gray-100 rounded-t-lg">
                            <tr>
                                <th class="px-4 py-2">Date</th>
                                <th class="px-4 py-2">Customer</th>
                                <th class="px-4 py-2">Event Type</th>
                                <th class="px-4 py-2">Package</th>
                                <th class="px-4 py-2">Amount</th>
                                <th class="px-4 py-2">Status</th>
                            </tr>
                        </thead>
                        <tbody id="bookingsTableBody">
                            <!-- Bookings will be added here dynamically -->
                            <tr class="text-center">
                                <td colspan="6" class="px-4 py-8 text-gray-500">No bookings yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Our Services Section -->
        <div class="mt-12 mb-16 text-center">
            <h2 class="text-3xl font-bold mb-8">Our Services</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="glass-card rounded-lg p-5 hover:shadow-lg transition duration-300">
                    <div class="text-indigo-600 text-3xl mb-4">
                        <i class="bi bi-heart"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Wedding Photography</h3>
                    <p class="text-gray-600">Capturing the most beautiful moments of your special day with elegance and style.</p>
                </div>
                <div class="glass-card rounded-lg p-5 hover:shadow-lg transition duration-300">
                    <div class="text-indigo-600 text-3xl mb-4">
                        <i class="bi bi-building"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Corporate Events</h3>
                    <p class="text-gray-600">Professional photography for your business events, conferences and corporate gatherings.</p>
                </div>
                <div class="glass-card rounded-lg p-5 hover:shadow-lg transition duration-300">
                    <div class="text-indigo-600 text-3xl mb-4">
                        <i class="bi bi-people"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Family Portraits</h3>
                    <p class="text-gray-600">Beautiful family portraits that capture genuine connections and emotions.</p>
                </div>
            </div>
        </div>

        <footer class="text-center text-gray-600 text-sm mt-12">
            <p>© 2023 Shah Photography. All rights reserved.</p>
            <div class="mt-4 space-x-4">
                <a href="#" class="text-indigo-600 hover:text-indigo-800"><i class="bi bi-instagram"></i></a>
                <a href="#" class="text-indigo-600 hover:text-indigo-800"><i class="bi bi-facebook"></i></a>
                <a href="#" class="text-indigo-600 hover:text-indigo-800"><i class="bi bi-twitter"></i></a>
                <a href="#" class="text-indigo-600 hover:text-indigo-800"><i class="bi bi-telephone"></i> Contact Us</a>
            </div>
        </footer>

        <!-- Booking Confirmation Modal -->
        <div id="confirmationModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="glass-effect p-6 rounded-lg max-w-sm w-full mx-4">
                <div class="text-center mb-4 text-green-600">
                    <i class="bi bi-check-circle text-5xl"></i>
                </div>
                <h2 class="text-xl font-bold mb-4 text-center">Booking Confirmed!</h2>
                <p class="text-gray-600 mb-4 text-center">Thank you for booking with Shah Photography. We will contact you shortly to confirm the details.</p>
                <p class="text-gray-600 mb-4 text-center">A confirmation SMS has been sent to your phone number.</p>
                <div id="bookingSummary" class="bg-indigo-50 p-4 rounded-lg mb-4 text-sm">
                    <!-- Booking details will be inserted here -->
                </div>
                <button onclick="closeModal()" class="w-full bg-gradient-to-r from-purple-600 to-indigo-700 text-white py-2 rounded-lg hover:from-purple-700 hover:to-indigo-800 transition duration-300">
                    Close
                </button>
            </div>
        </div>

        <!-- SMS Sent Confirmation Modal -->
        <div id="smsSentModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="glass-effect p-6 rounded-lg max-w-sm w-full mx-4">
                <div class="text-center mb-4 text-green-600">
                    <i class="bi bi-check-circle text-5xl"></i>
                </div>
                <h2 class="text-xl font-bold mb-4 text-center">SMS Sent Successfully!</h2>
                <p class="text-gray-600 mb-4 text-center">Your message has been sent to the customer.</p>
                <button onclick="closeSmsModal()" class="w-full bg-gradient-to-r from-purple-600 to-indigo-700 text-white py-2 rounded-lg hover:from-purple-700 hover:to-indigo-800 transition duration-300">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // Three.js background setup
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x000000, 0);
        container.appendChild(renderer.domElement);
        
        // Create floating particles (camera lens dust effect)
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 1000;
        const posArray = new Float32Array(particlesCount * 3);
        
        for(let i = 0; i < particlesCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 10;
        }
        
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.005,
            color: 0x7c3aed // Indigo color
        });
        
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);
        
        // Camera position
        camera.position.z = 3;
        
        // Animation
        function animate() {
            requestAnimationFrame(animate);
            
            particlesMesh.rotation.x += 0.0003;
            particlesMesh.rotation.y += 0.0005;
            
            renderer.render(scene, camera);
        }
        
        animate();
        
        // Responsive design for Three.js
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        // Tab Switching
        function switchTab(tabName) {
            // Hide all sections
            document.getElementById('bookingSection').classList.add('hidden');
            document.getElementById('ledgerSection').classList.add('hidden');
            document.getElementById('remindersSection').classList.add('hidden');
            document.getElementById('reportsSection').classList.add('hidden');
            
            // Remove active class from all tabs
            document.getElementById('bookingTab').classList.remove('tab-active');
            document.getElementById('ledgerTab').classList.remove('tab-active');
            document.getElementById('remindersTab').classList.remove('tab-active');
            document.getElementById('reportsTab').classList.remove('tab-active');
            
            // Show the selected section and make tab active
            document.getElementById(tabName + 'Section').classList.remove('hidden');
            document.getElementById(tabName + 'Tab').classList.add('tab-active');
        }
        
        // Data Storage
        let bookings = JSON.parse(localStorage.getItem('shahPhotographyBookings')) || [];
        let transactions = JSON.parse(localStorage.getItem('shahPhotographyTransactions')) || [];
        let reminders = JSON.parse(localStorage.getItem('shahPhotographyReminders')) || [];
        let customers = {};
        
        // Calculate totals
        function updateLedgerStats() {
            let totalCredits = 0;
            let totalDebits = 0;
            
            transactions.forEach(transaction => {
                if (transaction.type === 'credit') {
                    totalCredits += parseFloat(transaction.amount);
                } else {
                    totalDebits += parseFloat(transaction.amount);
                }
            });
            
            document.getElementById('totalTransactions').innerText = transactions.length;
            document.getElementById('totalCredits').innerText = '₹' + totalCredits.toLocaleString('en-IN');
            document.getElementById('totalDebits').innerText = '₹' + totalDebits.toLocaleString('en-IN');
            
            // Update reports
            document.getElementById('totalBookings').innerText = bookings.length;
            document.getElementById('totalRevenue').innerText = '₹' + totalCredits.toLocaleString('en-IN');
            document.getElementById('pendingPayments').innerText = '₹' + (totalCredits - totalDebits).toLocaleString('en-IN');
            
            // Update customer list for reminders
            const customerSelect = document.getElementById('reminderCustomerSelect');
            customerSelect.innerHTML = '<option value="">Select Customer</option>';
            
            const uniqueCustomers = {};
            transactions.forEach(transaction => {
                if (!uniqueCustomers[transaction.customerPhone]) {
                    uniqueCustomers[transaction.customerPhone] = {
                        name: transaction.customerName,
                        phone: transaction.customerPhone
                    };
                }
            });
            
            Object.values(uniqueCustomers).forEach(customer => {
                const option = document.createElement('option');
                option.value = customer.phone;
                option.textContent = `${customer.name} (${customer.phone})`;
                customerSelect.appendChild(option);
            });
            
            customers = uniqueCustomers;
        }
        
        // Render transactions table
        function renderTransactionsTable() {
            const tableBody = document.getElementById('transactionsTableBody');
            
            if (transactions.length === 0) {
                tableBody.innerHTML = `
                    <tr class="text-center">
                        <td colspan="6" class="px-4 py-8 text-gray-500">No transactions yet</td>
                    </tr>
                `;
                return;
            }
            
            tableBody.innerHTML = '';
            
            // Sort transactions by date (newest first)
            const sortedTransactions = [...transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedTransactions.forEach((transaction, index) => {
                const row = document.createElement('tr');
                row.className = `transaction-item hover:bg-gray-50 ${transaction.type === 'credit' ? 'transaction-credit' : 'transaction-debit'}`;
                
                // Format date
                const transactionDate = new Date(transaction.date);
                const formattedDate = transactionDate.toLocaleDateString('en-IN');
                
                row.innerHTML = `
                    <td class="px-4 py-3">${formattedDate}</td>
                    <td class="px-4 py-3">${transaction.customerName}</td>
                    <td class="px-4 py-3">${transaction.customerPhone}</td>
                    <td class="px-4 py-3">${transaction.description || '-'}</td>
                    <td class="px-4 py-3 font-medium ${transaction.type === 'credit' ? 'text-green-600' : 'text-red-600'}">
                        ${transaction.type === 'credit' ? '+' : '-'}₹${parseFloat(transaction.amount).toLocaleString('en-IN')}
                    </td>
                    <td class="px-4 py-3">
                        <button onclick="sendSmsForTransaction(${index})" class="text-green-600 hover:text-green-800 mr-2">
                            <i class="bi bi-send"></i>
                        </button>
                        <button onclick="deleteTransaction(${index})" class="text-red-600 hover:text-red-800">
                            <i class="bi bi-trash"></i>
                        </button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Render bookings table
        function renderBookingsTable() {
            const tableBody = document.getElementById('bookingsTableBody');
            
            if (bookings.length === 0) {
                tableBody.innerHTML = `
                    <tr class="text-center">
                        <td colspan="6" class="px-4 py-8 text-gray-500">No bookings yet</td>
                    </tr>
                `;
                return;
            }
            
            tableBody.innerHTML = '';
            
            // Sort bookings by date (newest first)
            const sortedBookings = [...bookings].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedBookings.forEach((booking) => {
                // Calculate amount based on package
                let amount = 0;
                if (booking.package === 'basic') amount = 5000;
                else if (booking.package === 'standard') amount = 10000;
                else if (booking.package === 'premium') amount = 20000;
                else amount = 'Custom';
                
                // Check if payment is found in transactions
                const paymentFound = transactions.some(t => 
                    t.customerPhone === booking.phone && 
                    t.description && 
                    t.description.includes(booking.eventType)
                );
                
                const status = paymentFound ? 'Paid' : 'Pending';
                
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                // Format date
                const bookingDate = new Date(booking.date);
                const formattedDate = bookingDate.toLocaleDateString('en-IN');
                
                row.innerHTML = `
                    <td class="px-4 py-3">${formattedDate}</td>
                    <td class="px-4 py-3">${booking.name}</td>
                    <td class="px-4 py-3">${booking.eventType}</td>
                    <td class="px-4 py-3">${booking.package || 'Custom'}</td>
                    <td class="px-4 py-3">${amount === 'Custom' ? 'Custom' : '₹' + amount.toLocaleString('en-IN')}</td>
                    <td class="px-4 py-3">
                        <span class="px-2 py-1 text-xs rounded-full ${status === 'Paid' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                            ${status}
                        </span>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Render reminders
        function renderReminders() {
            const remindersContainer = document.getElementById('upcomingReminders');
            
            if (reminders.length === 0) {
                remindersContainer.innerHTML = '<div class="text-center py-8 text-gray-500">No reminders scheduled</div>';
                return;
            }
            
            remindersContainer.innerHTML = '';
            
            // Sort reminders by date (soonest first)
            const sortedReminders = [...reminders].sort((a, b) => new Date(a.date) - new Date(b.date));
            
            sortedReminders.forEach((reminder, index) => {
                const customer = customers[reminder.customerPhone] || { name: 'Unknown Customer' };
                
                const reminderDate = new Date(reminder.date);
                const formattedDate = reminderDate.toLocaleDateString('en-IN');
                
                const reminderEl = document.createElement('div');
                reminderEl.className = 'glass-card rounded-lg p-4 hover:shadow-lg transition duration-300';
                
                reminderEl.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h4 class="font-medium">${customer.name}</h4>
                            <p class="text-sm text-gray-600">${customer.phone}</p>
                        </div>
                        <div class="flex space-x-2">
                            <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">${formattedDate}</span>
                            <button onclick="deleteReminder(${index})" class="text-red-600 hover:text-red-800">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </div>
                    <p class="text-gray-700 text-sm">${reminder.message}</p>
                    <div class="mt-2 text-right">
                        <button onclick="sendReminderSms(${index})" class="text-xs bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded inline-flex items-center">
                            <i class="bi bi-send-check mr-1"></i> Send Now
                        </button>
                    </div>
                `;
                
                remindersContainer.appendChild(reminderEl);
            });
        }
        
        // Send SMS for Transaction
        function sendSmsForTransaction(index) {
            const transaction = transactions[index];
            const message = `Shah Photography: This is to confirm a ${transaction.type === 'credit' ? 'payment' : 'refund'} of ₹${transaction.amount} on ${new Date(transaction.date).toLocaleDateString('en-IN')}. ${transaction.description || ''} Thank you for your business!`;
            
            // In a real app, this would connect to an SMS API
            console.log(`SMS sent to ${transaction.customerPhone}: ${message}`);
            
            // Show confirmation modal
            document.getElementById('smsSentModal').classList.remove('hidden');
        }
        
        // Send Reminder SMS
        function sendReminderSms(index) {
            const reminder = reminders[index];
            const customer = customers[reminder.customerPhone];
            
            if (!customer) return;
            
            // In a real app, this would connect to an SMS API
            console.log(`Reminder SMS sent to ${reminder.customerPhone}: ${reminder.message}`);
            
            // Show confirmation modal
            document.getElementById('smsSentModal').classList.remove('hidden');
        }
        
        // Delete Transaction
        function deleteTransaction(index) {
            if (confirm('Are you sure you want to delete this transaction?')) {
                transactions.splice(index, 1);
                localStorage.setItem('shahPhotographyTransactions', JSON.stringify(transactions));
                updateLedgerStats();
                renderTransactionsTable();
            }
        }
        
        // Delete Reminder
        function deleteReminder(index) {
            if (confirm('Are you sure you want to delete this reminder?')) {
                reminders.splice(index, 1);
                localStorage.setItem('shahPhotographyReminders', JSON.stringify(reminders));
                renderReminders();
            }
        }
        
        // Form handling
        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Basic form validation
            const inputs = this.querySelectorAll('input, select');
            let isValid = true;
            const bookingData = {};
            
            inputs.forEach(input => {
                if (input.required && !input.value) {
                    isValid = false;
                    input.classList.add('border-red-500');
                } else {
                    input.classList.remove('border-red-500');
                    if (input.name) {
                        bookingData[input.name] = input.value;
                    }
                }
            });

            if (isValid) {
                // Add requirements if any
                const requirementsTextarea = this.querySelector('textarea[name="requirements"]');
                if (requirementsTextarea) {
                    bookingData.requirements = requirementsTextarea.value;
                }
                
                // Calculate price based on package
                let price = 0;
                if (bookingData.package === 'basic') price = 5000;
                else if (bookingData.package === 'standard') price = 10000;
                else if (bookingData.package === 'premium') price = 20000;
                
                // Add to bookings array
                bookings.push(bookingData);
                localStorage.setItem('shahPhotographyBookings', JSON.stringify(bookings));
                
                // Create transaction entry for the booking
                const transaction = {
                    customerName: bookingData.name,
                    customerPhone: bookingData.phone,
                    type: 'credit',
                    amount: price || 'Custom',
                    date: new Date().toISOString().split('T')[0],
                    description: `Booking for ${bookingData.eventType} on ${bookingData.date}`
                };
                
                if (price > 0) {
                    transactions.push(transaction);
                    localStorage.setItem('shahPhotographyTransactions', JSON.stringify(transactions));
                }
                
                // Collect form data for display
                const formElements = this.elements;
                let summaryHTML = '<h3 class="font-bold mb-2">Booking Details:</h3>';
                
                // Get name
                const name = bookingData.name;
                
                // Get phone
                const phone = bookingData.phone;
                
                // Get event type
                const eventTypeSelect = this.querySelector('select[name="eventType"]');
                const eventType = eventTypeSelect.options[eventTypeSelect.selectedIndex].text;
                
                // Get date
                const date = bookingData.date;
                
                // Get time slot
                const timeSelect = this.querySelector('select[name="timeSlot"]');
                const timeSlot = timeSelect.options[timeSelect.selectedIndex].text;
                
                // Create summary
                summaryHTML += `<p><strong>Name:</strong> ${name}</p>`;
                summaryHTML += `<p><strong>Phone:</strong> ${phone}</p>`;
                summaryHTML += `<p><strong>Event:</strong> ${eventType}</p>`;
                summaryHTML += `<p><strong>Date:</strong> ${date}</p>`;
                summaryHTML += `<p><strong>Time:</strong> ${timeSlot}</p>`;
                
                // Update summary in modal
                document.getElementById('bookingSummary').innerHTML = summaryHTML;
                
                // Show confirmation modal
                document.getElementById('confirmationModal').classList.remove('hidden');
                
                // Reset form
                this.reset();
                
                // Update stats
                updateLedgerStats();
                renderBookingsTable();
            }
        });
        
        // Ledger form handling
        document.getElementById('ledgerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const customerName = this.querySelector('input[name="customerName"]').value;
            const customerPhone = this.querySelector('input[name="customerPhone"]').value;
            const transactionType = this.querySelector('select[name="transactionType"]').value;
            const amount = this.querySelector('input[name="amount"]').value;
            const date = this.querySelector('input[name="transactionDate"]').value;
            const description = this.querySelector('textarea[name="description"]').value;
            
            // Create transaction object
            const transaction = {
                customerName,
                customerPhone,
                type: transactionType,
                amount,
                date,
                description
            };
            
            // Add to transactions array
            transactions.push(transaction);
            localStorage.setItem('shahPhotographyTransactions', JSON.stringify(transactions));
            
            // Reset form
            this.reset();
            
            // Update UI
            updateLedgerStats();
            renderTransactionsTable();
        });
        
        // Reminder form handling
        document.getElementById('reminderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const customerPhone = this.querySelector('select[name="reminderCustomer"]').value;
            const date = this.querySelector('input[name="reminderDate"]').value;
            const message = this.querySelector('textarea[name="reminderMessage"]').value;
            
            // Create reminder object
            const reminder = {
                customerPhone,
                date,
                message: message || `Dear customer, this is a payment reminder from Shah Photography. Please settle your pending dues at your earliest convenience. Thank you!`
            };
            
            // Add to reminders array
            reminders.push(reminder);
            localStorage.setItem('shahPhotographyReminders', JSON.stringify(reminders));
            
            // Reset form
            this.reset();
            
            // Update UI
            renderReminders();
            
            // Show confirmation
            alert('Reminder scheduled successfully!');
        });
        
        // Send SMS button
        document.getElementById('sendSmsBtn').addEventListener('click', function() {
            const customerName = document.querySelector('input[name="customerName"]').value;
            const customerPhone = document.querySelector('input[name="customerPhone"]').value;
            
            if (!customerPhone) {
                alert('Please enter a phone number');
                return;
            }
            
            const message = `Shah Photography: Thank you for your business, ${customerName || 'valued customer'}. We look forward to working with you!`;
            
            // In a real app, this would connect to an SMS API
            console.log(`SMS sent to ${customerPhone}: ${message}`);
            
            // Show confirmation modal
            document.getElementById('smsSentModal').classList.remove('hidden');
        });
        
        function closeModal() {
            document.getElementById('confirmationModal').classList.add('hidden');
        }
        
        function closeSmsModal() {
            document.getElementById('smsSentModal').classList.add('hidden');
        }
        
        // Disable past dates in date picker
        const dateInputs = document.querySelectorAll('input[type="date"]');
        const today = new Date().toISOString().split('T')[0];
        dateInputs.forEach(input => {
            input.min = today;
        });
        
        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            updateLedgerStats();
            renderTransactionsTable();
            renderBookingsTable();
            renderReminders();
        });
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>